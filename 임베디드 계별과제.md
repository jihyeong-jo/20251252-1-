ë„¤, ì•„ì£¼ ì¢‹ìŠµë‹ˆë‹¤\! ì•± ì¸ë²¤í„° ë¸”ë¡, ìˆ˜ì •ëœ í”„ë¡œì„¸ì‹± ì½”ë“œ, ê·¸ë¦¬ê³  ì•„ë‘ì´ë…¸ ìŠ¤ì¼€ì¹˜ê¹Œì§€ ì™„ë²½í•˜ê²Œ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ì´ ëª¨ë“  ì •ë³´ë¥¼ ì •ë¦¬í•˜ì—¬ GitHub ë³´ê³ ì„œ í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì–´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

ì´ ë³´ê³ ì„œëŠ” í”„ë¡œì íŠ¸ ê°œìš”, ì‚¬ìš©ëœ ê¸°ìˆ , ì•± ì¸ë²¤í„° ì„¤ì •, ì„œë²„ ë¡œì§(í”„ë¡œì„¸ì‹±), ê·¸ë¦¬ê³  í•˜ë“œì›¨ì–´ ë¡œì§(ì•„ë‘ì´ë…¸)ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ìƒì„¸í•œ ë¬¸ì„œê°€ ë  ê²ƒì…ë‹ˆë‹¤.

-----

# ğŸ’¡ ìŠ¤ë§ˆíŠ¸ LED ì œì–´ ì‹œìŠ¤í…œ ë³´ê³ ì„œ (App Inventor + Processing + Arduino)

## 1\. í”„ë¡œì íŠ¸ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” MIT App Inventorë¡œ ì œì‘ëœ ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í†µí•´ ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ìƒì˜ LED ìƒíƒœë¥¼ ì›ê²©ìœ¼ë¡œ ì œì–´í•˜ê³ , ì¡°ë„ ì„¼ì„œ ê°’ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” IoT ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

| í•­ëª© | ì‚¬ìš© ê¸°ìˆ /í”Œë«í¼ |
| :--- | :--- |
| **ëª¨ë°”ì¼ ì•±** | MIT App Inventor (ì•ˆë“œë¡œì´ë“œ) |
| **ì„œë²„/ê²Œì´íŠ¸ì›¨ì´** | Processing (HTTP ì„œë²„ ë° ì‹œë¦¬ì–¼ í†µì‹  ê²Œì´íŠ¸ì›¨ì´) |
| **í•˜ë“œì›¨ì–´ ì œì–´** | Arduino Uno/Nano (LED ë° ì¡°ë„ ì„¼ì„œ ì œì–´) |
| **í†µì‹  í”„ë¡œí† ì½œ** | Local Wi-Fi Network, HTTP GET, Arduino Serial |

## 2\. í•˜ë“œì›¨ì–´ êµ¬ì„± ë° ë™ì‘ ì›ë¦¬

### 2.1. í•˜ë“œì›¨ì–´ ìŠ¤ì¼€ì¹˜ (Arduino)

  * **LED ì œì–´:** ë””ì§€í„¸ í•€ 8ë²ˆì„ í†µí•´ LEDë¥¼ ì œì–´í•©ë‹ˆë‹¤.
  * **ì¡°ë„ ì„¼ì„œ:** ì•„ë‚ ë¡œê·¸ í•€ A0ë²ˆì„ í†µí•´ ì¡°ë„ ì„¼ì„œ ê°’(0\~1023)ì„ ì½ìŠµë‹ˆë‹¤.
  * **ë™ì‘ ëª¨ë“œ:**
      * **ìë™ ëª¨ë“œ (AutoMode):** ì¡°ë„ ì„¼ì„œ ê°’(`lightThreshold` 7)ì„ ê¸°ì¤€ìœ¼ë¡œ LEDë¥¼ ìë™ìœ¼ë¡œ ì¼œê³  ë•ë‹ˆë‹¤.
      * **ìˆ˜ë™ ëª¨ë“œ (ManualMode):** ì•±ì—ì„œ '1' ë˜ëŠ” '0' ëª…ë ¹ì´ ì˜¤ë©´ ìˆ˜ë™ ëª¨ë“œë¡œ ì „í™˜ë˜ë©°, **30ì´ˆ** ë™ì•ˆ í•´ë‹¹ ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. 30ì´ˆ í›„ì—ëŠ” ìë™ìœ¼ë¡œ ë‹¤ì‹œ ìë™ ëª¨ë“œë¡œ ë³µê·€í•©ë‹ˆë‹¤.
  * **ì‹œë¦¬ì–¼ í†µì‹ :** LED ìƒíƒœ(`1` ë˜ëŠ” `0`)ì™€ ì¡°ë„ ê°’(`LIGHT:XXX`)ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ Processing ì„œë²„ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.

### 2.2. ì•„ë‘ì´ë…¸ ìŠ¤ì¼€ì¹˜ (Arduino Code)

```cpp
int ledPin = 8;
int sensorPin = A0;

bool autoMode = true;
bool ledState = false;

unsigned long manualTime = 0;
const unsigned long manualDuration = 30000; // 30ì´ˆ

// âœ… ì¡°ë„ ê¸°ì¤€ ì„ê³„ê°’
const int lightThreshold = 7;

void setup() {
  Serial.begin(9600);
  pinMode(ledPin, OUTPUT);
}

void loop() {
  int sensorValue = analogRead(sensorPin);

  // -----------------------------
  // ìˆ˜ë™ ëª¨ë“œ íƒ€ì´ë¨¸ ì²´í¬
  // -----------------------------
  if (!autoMode) {
    if (millis() - manualTime >= manualDuration) {
      autoMode = true;
      Serial.println("AUTO");
    }
  }

  // -----------------------------
  // LED ìƒíƒœ ì œì–´ (ìë™ ëª¨ë“œ)
  // -----------------------------
  if (autoMode) {
    if (sensorValue <= lightThreshold) {
      ledState = true;
    } else {
      ledState = false;
    }
    digitalWrite(ledPin, ledState ? HIGH : LOW);
    Serial.println(ledState ? 1 : 0);
  }

  // -----------------------------
  // ì‹œë¦¬ì–¼ ëª…ë ¹ ì²˜ë¦¬ (ìˆ˜ë™ ON/OFF)
  // -----------------------------
  if (Serial.available() > 0) {
    char cmd = Serial.read();

    if (cmd == '1') {
      autoMode = false;
      manualTime = millis();
      ledState = true;
      digitalWrite(ledPin, HIGH);
      Serial.println(1);
    }
    else if (cmd == '0') {
      autoMode = false;
      manualTime = millis();
      ledState = false;
      digitalWrite(ledPin, LOW);
      Serial.println(0);
    }
  }

  // -----------------------------
  // ì¡°ë„ ê°’ ì „ì†¡
  // -----------------------------
  Serial.print("LIGHT:");
  Serial.println(sensorValue);

  delay(200);
}
```

## 3\. ì„œë²„ ë¡œì§ (Processing)

Processing ì½”ë“œëŠ” ì•± ì¸ë²¤í„°ì™€ ì•„ë‘ì´ë…¸ ì‚¬ì´ë¥¼ ì—°ê²°í•˜ëŠ” ê²Œì´íŠ¸ì›¨ì´ ì—­í• ì„ í•©ë‹ˆë‹¤.

### 3.1. ì£¼ìš” ê¸°ëŠ¥

1.  **HTTP ì„œë²„:** í¬íŠ¸ `12345`ì—ì„œ ì•± ì¸ë²¤í„°ì˜ HTTP GET ìš”ì²­ì„ ìˆ˜ì‹ í•©ë‹ˆë‹¤.
2.  **ëª…ë ¹ íŒŒì‹±:** ìˆ˜ì‹ ëœ HTTP ìš”ì²­ì—ì„œ ê²½ë¡œ(`/1` ë˜ëŠ” `/0`)ë¥¼ ë¶„ì„í•˜ì—¬ LED ì œì–´ ëª…ë ¹ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
3.  **ì‹œë¦¬ì–¼ í†µì‹ :** ì¶”ì¶œëœ ëª…ë ¹(`'1'` ë˜ëŠ” `'0'`)ì„ ì•„ë‘ì´ë…¸ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
4.  **ìƒíƒœ ì „ì†¡:** ì•„ë‘ì´ë…¸ë¡œë¶€í„° ìˆ˜ì‹ í•œ ìµœì‹  LED ìƒíƒœ(`ledState`)ë¥¼ ì•± ì¸ë²¤í„°ë¡œ ì‘ë‹µ(HTTP Response Body)í•©ë‹ˆë‹¤.

### 3.2. Processing Code

```java
import processing.serial.*;
import processing.net.*;

Serial p;
Server s;
Client c;

// LED ìƒíƒœ (0 ë˜ëŠ” 1)
String ledState = "0";
// ì¡°ë„ ê°’ (0 ~ 1023)
String lightValue = "0";

void setup() {
  size(400, 200); 
  p = new Serial(this, "COM9", 9600); // ğŸš¨ COM í¬íŠ¸ í™•ì¸ í•„ìš”
  s = new Server(this, 12345);
  smooth();
}

void draw() {
  background(0); fill(255); textSize(20);

  // -----------------------------
  // Arduino â†’ Processing (ì‹œë¦¬ì–¼ ìˆ˜ì‹  ë° ìƒíƒœ ì—…ë°ì´íŠ¸)
  // -----------------------------
  while (p.available() > 0) {
    String msg = p.readStringUntil('\n');
    if (msg != null) {
      msg = msg.trim();
      // LED ìƒíƒœ ì—…ë°ì´íŠ¸
      if (msg.equals("0") || msg.equals("1")) {
        ledState = msg;
      }
      // ì¡°ë„ ê°’ ì—…ë°ì´íŠ¸
      if (msg.startsWith("LIGHT:")) {
        lightValue = msg.substring(6);
      }
    }
  }

  // í™”ë©´ í‘œì‹œ
  text("LED ìƒíƒœ : " + ledState, 20, 60);
  text("ì¡°ë„ ê°’ : " + lightValue, 20, 100);
  text("ì„œë²„ í¬íŠ¸ : 12345", 20, 140);

  // -----------------------------
  // App Inventor â†’ Processing ìˆ˜ì‹  ë° ëª…ë ¹ ì²˜ë¦¬
  // -----------------------------
  c = s.available();
  if (c != null) {
    String request = c.readString();

    if (request != null) {
      request = request.trim();

      // ëª…ë ¹ íŒŒì‹±: HTTP ìš”ì²­ ë¬¸ìì—´ì—ì„œ ëª…ë ¹ì–´ ê²½ë¡œ(/1 ë˜ëŠ” /0)ë¥¼ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
      if (request.contains(" /1 ")) { 
        p.write('1'); // ì•„ë‘ì´ë…¸ë¡œ '1' ì „ì†¡
        ledState = "1"; // ì‘ë‹µì„ ìœ„í•œ ìƒíƒœ ì„ì‹œ ì—…ë°ì´íŠ¸
      } else if (request.contains(" /0 ")) {
        p.write('0'); // ì•„ë‘ì´ë…¸ë¡œ '0' ì „ì†¡
        ledState = "0"; // ì‘ë‹µì„ ìœ„í•œ ìƒíƒœ ì„ì‹œ ì—…ë°ì´íŠ¸
      }

      // -----------------------------
      // Processing â†’ App Inventor ì „ì†¡ (LED ìƒíƒœ "1" ë˜ëŠ” "0" ë§Œ ì‘ë‹µ)
      // -----------------------------
      c.write("HTTP/1.1 200 OK\r\n\r\n");
      c.write(ledState);
    }
    c.stop();
  }
}
```

## 4\. ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ (App Inventor)

ì•±ì€ ì„¸ ê°œì˜ ë²„íŠ¼(`Button1`, `Button2`), ìƒíƒœ í‘œì‹œ ë ˆì´ë¸”(`Label1`), ê·¸ë¦¬ê³  ì£¼ê¸°ì ì¸ í†µì‹ ì„ ìœ„í•œ íƒ€ì´ë¨¸(`Clock1`, `Web1`)ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

### 4.1. ì»´í¬ë„ŒíŠ¸ ì„¤ì •

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | ì„¤ì • |
| :--- | :--- | :--- |
| **Web1** | HTTP í†µì‹  ê´€ë¦¬ | (ë””ìì´ë„ˆì—ì„œ Url ì†ì„± ë¹„ì›€) |
| **Clock1** | ì£¼ê¸°ì ì¸ ìƒíƒœ í™•ì¸ | `TimerInterval` = 3000ms (3ì´ˆ), `TimerEnabled` = True |
| **Label1** | ìƒíƒœ ë©”ì‹œì§€ ì¶œë ¥ | ì´ˆê¸° í…ìŠ¤íŠ¸: "ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”." |

### 4.2. ë¸”ë¡ ë¡œì§

ì•± ì¸ë²¤í„°ëŠ” ì„œë²„ ì£¼ì†Œë¥¼ `http://10.254.236.187:12345` (ìµœì¢… ì‚¬ìš© IP)ë¡œ ì„¤ì •í•˜ì—¬ HTTP GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.

-----

#### 4.2.1. ë²„íŠ¼ í´ë¦­ (ì œì–´ ëª…ë ¹)

ë²„íŠ¼ í´ë¦­ ì‹œ `join` ë¸”ë¡ì„ ì‚¬ìš©í•˜ì—¬ URLì— ëª…ë ¹ ê²½ë¡œ(`/1` ë˜ëŠ” `/0`)ë¥¼ í¬í•¨ì‹œí‚¤ê³  GET ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.

```blocks
// Button1.Click (LED ì¼œê¸°)
when Button1 .Click
do set Web1 .Url to join (text http://10.254.236.187:12345) (text /1)
   call Web1 .Get

// Button2.Click (LED ë„ê¸°)
when Button2 .Click
do set Web1 .Url to join (text http://10.254.236.187:12345) (text /0)
   call Web1 .Get
```

#### 4.2.2. íƒ€ì´ë¨¸ (ì£¼ê¸°ì  ìƒíƒœ í™•ì¸)

íƒ€ì´ë¨¸ê°€ ìš¸ë¦´ ë•Œë§ˆë‹¤ ì„œë²„ì— ê¸°ë³¸ URL ìš”ì²­ì„ ë³´ë‚´ í˜„ì¬ LED ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.

```blocks
when Clock1 .Timer
do set Web1 .Url to join (text http://10.254.236.187:12345) (text /)
   call Web1 .Get
```

#### 4.2.3. ì‘ë‹µ ì²˜ë¦¬ (Web1.GotText)

ì„œë²„ë¡œë¶€í„° ì‘ë‹µ(`responseContent` = "1" ë˜ëŠ” "0")ì„ ë°›ìœ¼ë©´, `Label1`ì— ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

```blocks
when Web1 .GotText
  url responseCode responseType responseContent
do if get responseContent = "1"
   then set Label1 .Text to "ë¶ˆì´ ì¼œì¡ŒìŠµë‹ˆë‹¤."
   else set Label1 .Text to "ë¶ˆì´ êº¼ì¡ŒìŠµë‹ˆë‹¤."
```
